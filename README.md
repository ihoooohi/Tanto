---

# Vim-OneShot-AHK 🚀

**Vim-OneShot-AHK** 是一款基于 AutoHotkey (v2.0) 的全局效率工具。它并非简单的 Vim 模拟，而是针对“编辑-导航”频繁切换的场景，设计了一套**以动作为导向（Action-oriented）**的操作逻辑。

其核心哲学是：**进入导航模式仅为了完成单次任务（选中、复制、删除），动作完成后立即回归编辑模式。**

---

## 🌟 核心特性

* **一击脱离 (One-shot Execution)**：所有操作（复制 `y`、剪切 `x`、删除 `d`、粘贴 `p`）在完成后会自动将光标切回“编辑模式”，并自动闭合选区。
* **进场即视觉 (Default Visual Mode)**：单击 `CapsLock` 直接进入选中状态，无需多按一次 `v`。
* **多态操作符 (Polymorphic Operators)**：
* 如果已通过位移产生选区，`d` / `c` 立即作用于选区。
* 如果原位不动，`d` / `c` 进入等待状态，支持 `dh` (删行), `dw` (删词), `db` (删前词) 等连招。


* **行控制中心 (`h` 键)**：全局定义 `h` 为行操作后缀，支持 `h` 直接选中当前行。
* **智能选区坍缩**：删除操作后光标原位不动，复制操作后选区自动闭合，防止残留蓝色高亮干扰视线。

---

## ⌨️ 快捷键映射

### 1. 基础导航 (IJKL 体系)

在任何模式下按住 `CapsLock` 即可进行微调移动：

| 按键 | 功能 | 说明 |
| --- | --- | --- |
| `CapsLock + I/K/J/L` | 上/下/左/右 | 基础位移 |
| `CapsLock + U/O` | Home / End | 行首 / 行尾 |
| `Ctrl + I/K` | 跳跃 5 行 | 快速纵向定位 |
| `Ctrl + J/L` | 跳跃单词 | 快速横向定位 |

### 2. 导航模式指令 (单击 CapsLock 后)

进入模式后，`IJKL` 默认带选中效果。

| 指令 | 动作 | 结果 |
| --- | --- | --- |
| `h` | **选中整行** | 立即高亮当前行，并允许后续接 `d` 或 `y` |
| `y` / `c` | **复制** | 复制选区并立即退出模式 |
| `d` | **删除** | 删除选区/内容并立即退出模式 |
| `p` | **粘贴** | 在当前位置粘贴并立即退出模式 |
| `v` | **模式切换** | 在“选中模式”与“普通移动模式”间切换 |

### 3. 操作符连招 (未选中时触发)

| 连招 | 功能描述 |
| --- | --- |
| `dh` | 删除整行 (Delete House) |
| `dw` | 向后删除一个单词 (Delete Word) |
| `db` | 向前删除一个单词 (Delete Backward) |
| `ch` | 复制整行 (Copy House) |
| `cw` | 复制后方单词 (Copy Word) |
| `cb` | 复制前方单词 (Copy Backward) |

---

## 🛠️ 安装与使用

1. 下载并安装 [AutoHotkey v2.0+](https://www.autohotkey.com/)。
2. 下载本项目中的 `VimOneShot.ahk`。
3. 双击运行脚本。
4. **注意**：在 VS Code、Visual Studio 或 IntelliJ 等 IDE 中使用时，建议**以管理员身份运行**脚本，以确保 AHK 指令拥有足够的权限拦截按键。

---

## 🧠 逻辑逻辑流程图

该脚本的核心逻辑基于状态机判定：

---

## 📄 开源协议

MIT License.
